{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}
    <style>
        #appointment_top{
            font-family: "Georgia", serif;
            font-size: xx-large;
            padding-left: 30%;
            margin-bottom: 10px;
            margin-top: 20px;
        }
        tr{
            border: #5f788a;
            border-style: solid;
        }
        th{
            background-color: #5f788a;
            color: white;
            font-size: large;
            width: 150px;
        }
        input{
            border-style: none;
            font-size: x-large;
        }
        .week{
            width: 100px;
            margin-left: 10px;
        }
        .part1_ans{
            width: 500px;
        }
        .input-group{
            border: #5f788a;
            border-style: double;
        }
        textarea{
            resize:none;
        }
        .q_button{
            margin-top: 5px;
        }
    </style>
     <div class="row no-gutters">
        <div class="col-3"></div>
        <div class="col-6">
            <div id="appointment_top">
                <label>Consultation appointment</label>
            </div>
            <form id="appointment_form" method="post">
                {% csrf_token %}
                <input type="hidden" name="g-recaptcha-response" id='g-recaptcha-response'>
                <input type="hidden" name="user_ptr_id" id="user_ptr_id">
                <table width="100%">
                    <tbody>
                        <tr>
                            <th>First Name</th>
                            <td>
                                <input value="{{ user_form.first_name.value }}" readonly>
                            </td>
                            <th>Last Name</th>
                            <td>
                                <input type="text" value="{{ user_form.last_name.value }}" readonly>
                            </td>
                        </tr>
                        <tr>
                            <th>Contact Number</th>
                            <td>
                                <input type="text" value="{{ user_form.contact_number.value }}" readonly>
                            </td>
                            <th>Email</th>
                            <td>
                                <input type="text" value="{{ user_form.email.value }}" readonly>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <table>
                    <tbody>
                        <tr style="width: 100%">
                            <th rowspan=4>Available Time</th>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Monday</label>
                                <input id="mon_m" name="mon_m" type="checkbox" class="btn-check"  autocomplete="off">
                                <label class="btn btn-outline-primary" for="mon_m">Morning</label>

                                <input id="mon_a" name="mon_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="mon_a">Afternoon</label>

                                <input id="mon_e" name="mon_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="mon_e">Evening</label>
                            </td>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Tuesday</label>
                                <input id="tue_m" name="tue_m" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="tue_m">Morning</label>

                                <input id="tue_a" name="tue_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="tue_a">Afternoon</label>

                                <input id="tue_e" name="tue_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="tue_e">Evening</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Wednesday</label>
                                <input id="wed_m" name="wed_m" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="wed_m">Morning</label>

                                <input id="wed_a" name="wed_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="wed_a">Afternoon</label>

                                <input id="wed_e" name="wed_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="wed_e">Evening</label>
                            </td>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Thursday</label>
                                <input id="thu_m" name="thu_m" type="checkbox" class="btn-check"  autocomplete="off">
                                <label class="btn btn-outline-primary" for="thu_m">Morning</label>

                                <input id="thu_a" name="thu_a" type="checkbox" class="btn-check"  autocomplete="off">
                                <label class="btn btn-outline-primary" for="thu_a">Afternoon</label>

                                <input id="thu_e" name="thu_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="thu_e">Evening</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Friday</label>
                                <input id="fri_m" name="fri_m" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="fri_m">Morning</label>

                                <input id="fri_a" name="fri_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="fri_a">Afternoon</label>

                                <input id="fri_e" name="fri_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="fri_e">Evening</label>
                            </td>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Saturday</label>
                                <input id="sat_m" name="sat_m" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sat_m">Morning</label>

                                <input id="sat_a" name="sat_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sat_a">Afternoon</label>

                                <input id="sat_e" name="sat_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sat_e">Evening</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="part1_ans" nowrap="nowrap">
                                <label class="week">Sunday</label>
                                <input id="sun_m" name="sun_m" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sun_m">Morning</label>

                                <input id="sun_a" name="sun_a" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sun_a">Afternoon</label>

                                <input id="sun_e" name="sun_e" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-primary" for="sun_e">Evening</label>
                            </td>
                        </tr>
                        <tr>
                            <th>Consultation Issue</th>
                            <td colspan="2">
                                <input id="q_career" name="q_career" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success" for="q_career">Career issues</label>

                                <input id="q_family" name="q_family" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success" for="q_family">Family issues</label>

                                <input id="q_stress" name="q_stress" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success" for="q_stress">Over stress</label>

                                <input id="q_relationship" name="q_relationship" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success" for="q_relationship">Relationship problem</label>

                                <input id="q_suicide" name="q_suicide" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success" for="q_suicide">Suicide/Self-injury</label>

                                <input id="q_violence" name="q_violence" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success q_button" for="q_violence">Violence/Sexual assault</label>

                                <input id="q_homo" name="q_homo" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success q_button" for="q_homo">Homosexual/Gender issues</label>

                                <input id="q_trauma" name="q_trauma" type="checkbox" class="btn-check" autocomplete="off">
                                <label class="btn btn-outline-success q_button" for="q_trauma">Psychological trauma</label>

                                <div class="input-group">
                                  <span class="input-group-text">Other problem (please describe)</span>
                                  <textarea name="q_other" class="form-control" aria-label="With textarea"></textarea>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button id="submit" class="g-recaptcha btn btn-primary" data-sitekey='{{site_key}}'
                    data-action="verify1" data-callback="verifyCallback" >Submit
                </button>
            </form>
        </div>
     </div>
    <script src="https://www.google.com/recaptcha/api.js?render={{ site_key }}"></script>
    <script>
        grecaptcha.ready(function() {
          grecaptcha.execute('{{site_key}}', {action: "appointment"}).then(function(token) {
              $('#g-recaptcha-response').attr("value",token)
          });
        });

        $('#submit').click( function() {
            $.ajax({
                url: "{% url 'appointment' %}",
                type: 'post',
                dataType: 'json',
                data: $('#appointment_form').serialize(),
                success: function(data) {
                    if (data.result == false){
                        alert(data.message)
                        location.href = '/'
                    }else {

                    }
                }
            });
        });

    </script>
{% endblock %}